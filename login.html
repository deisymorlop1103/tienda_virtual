<!DOCTYPE html>
<html>
<head>
    <title>Login and Register</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>Login and Register</h1>
    <form id="login-form">
        <input type="text" id="login-username" placeholder="Username" required><br>
        <input type="password" id="login-password" placeholder="Password" required><br>
        <button type="submit">Login</button>
    </form>
    <form id="register-form">
        <input type="text" id="register-username" placeholder="Username" required><br>
        <input type="password" id="register-password" placeholder="Password" required><br>
        <input type="email" id="register-email" placeholder="Email" required><br>
        <button type="submit">Register</button>
    </form>

    <!--  <div class="contenedor"></div>-->

	  <script>
    // FunciÃ³n para obtener datos de la API ficticia
    async function obtenerUsuarios() {
      try {
        const response = await fetch('https://fakestoreapi.deisymoreno1.repl.co/dataLogin');
        if (!response.ok) {
          throw new Error('Error en la solicitud');
        }
        const data = await response.json();
        return dataLogin;
      } catch (error) {
        console.error('Error:', error);
        return [];
      }
    }

    document.addEventListener("DOMContentLoaded", async () => {
      //const contenedor = document.querySelector(".contenedor");
      const usuario = await obtenerUsuarios();

      let usuarios = "";
      usuar.test1.forEach((usuario) => {
		localStorage.setItem(`usuario_${usuario.id}`, JSON.stringify(usuario));
     <!--   usuarios += `
          <div class="card" style="width: 18rem;">
            <img src="${product.image}" style="width: 100px" class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-text">${product.title}</h5>
              <p class="card-text">${product.price}</p>
              <a href="detalleproducto.html?id=${product.id}" class="btn btn-primary">Ver Detalle</a>
            </div>
          </div>
        `; -->
      });

  //    contenedor.innerHTML = usuarios; // Agrega el contenido al elemento con la clase "contenedor"
    });

    
        var users = JSON.parse(localStorage.getItem('usuarios')) || [];

        function checkUser(username) {
            return users.some(function(user) {
                return user.username === username;
            });
        }

        $("#login-form").submit(function(e) {
            e.preventDefault();
            var username = $("#login-username").val();
            var password = $("#login-password").val();
            var validUser = users.find(function(user) {
                return user.username === username && user.password === password;
            });
            if (validUser) {
                alert('Login successful');
                window.location.href = 'index.html';
            } else {
                alert('Invalid username or password');
            }
        });

        $("#register-form").submit(function(e) {
            e.preventDefault();
            var username = $("#register-username").val();
            var password = $("#register-password").val();
            var email = $("#register-email").val();
            if (checkUser(username)) {
                alert('Username already exists');
            }
                
</body>
</html>
