<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
 <title>productos</title>
  <link href="style.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="style.css" rel="stylesheet" type="text/css"/>

<body>
<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-black w3-card">
    <a class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-right" href="javascript:void(0)" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
    <a href="index.html" class="w3-bar-item w3-button w3-padding-large">HOME</a>
    <a href="productos.html" class="w3-bar-item w3-button w3-padding-large">PRODUCTOS</a>
    </div>
  </div>
  <h1>Carrito de Compras</h1>
  <ul id="carritoLista"></ul>
  <div class="contenedor"></div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Obtén el carrito desde localStorage
      const carrito = JSON.parse(localStorage.getItem("carrito"));

      // Obtén el elemento de la lista del carrito
      const carritoLista = document.getElementById("carritoLista");

      const contenedor = document.querySelector(".contenedor");
      const prods = await obtenerProductos();

let productos = "";
      prods.test.forEach((product) => {
		localStorage.setItem(`product_${product.id}`, JSON.stringify(product));
        productos += `
          <div class="card" style="width: 18rem;">
            <img src="${product.image}" style="width: 100px" class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-text">${product.title}</h5>
              <p class="card-text">${product.price}</p>
              <p class="card-text">${product.descripcion}</p>
            </div>
          </div>
        `;
      });

      contenedor.innerHTML = productos; // Agrega el contenido al elemento con la clase "contenedor"
    });


      
      if (carrito && carrito.length > 0) {
        // Recorre los productos en el carrito y muestra cada uno en la lista
        carrito.forEach((product) => {
          const listItem = document.createElement("li");
          listItem.textContent = product.title;
          carritoLista.appendChild(listItem);
        });
      } else {
        // Si el carrito está vacío, muestra un mensaje
        carritoLista.innerHTML = "<p>El carrito está vacío.</p>";
      }
    });

  </script>
</body>
</html>
