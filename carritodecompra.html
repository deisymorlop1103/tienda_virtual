<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>carrito</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<body>

<style>
 
#img {
    margin-left: 300px;
    width: 80px;
    margin-top: -55px;
}
</style>

  <!-- Navbar -->
  <div class="w3-top">
    <div class="w3-bar w3-black w3-card">
      <a class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-right" href="javascript:void(0)"
        onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
      <a href="index.html" class="w3-bar-item w3-button w3-padding-large">HOME</a>
      <a href="productos.html" class="w3-bar-item w3-button w3-padding-large">PRODUCTOS</a>
    </div>
  </div>

  <div style="margin-top:60px; margin-left:20px;">
    <h2>Carrito de Compras</h2>
    <ul id="carritoLista"></ul>
    <p id="precio"> </p>
  </div>

  <button id="delItems"
    style="margin-left:30px; margin-top: 20px; margin-bottom: 40px; width:150px; height:40px; border-radius: 15px;">Vaciar
    Carrito</button>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Obtén el carrito desde localStorage
      const carrito = JSON.parse(localStorage.getItem("carrito"));

      // Obtén el elemento de la lista del carrito
      const carritoLista = document.getElementById("carritoLista");
      // const imagen = document.getElementById("image");

      if (carrito && carrito.length > 0) {
        // Recorre los productos en el carrito y muestra cada uno en la lista
        carrito.forEach((product) => {

          const src = document.getElementById("image");
          const img = document.createElement("img");
          const listItem = document.createElement("div");
          const precio = document.createElement("div");
          const order = document.createElement("div");

          precio.textContent = product.price;
          listItem.textContent = product.title;
          //obtengo la ruta de la imagen
          img.src = product.image;

          // Modificas los atributos
          elem.classList.add('img');
          var parent = document.getElementById('parent');
          parent.appendChild(img);
          //carritoLista.appendChild(listItem).appendChild(precio).appendChild(img);

          carritoLista.appendChild(listItem)
          carritoLista.appendChild(precio)
          carritoLista.appendChild(order).appendChild(img);
          
         });

      } else {
        // Si el carrito está vacío, muestra un mensaje
        carritoLista.innerHTML = "<p>El carrito está vacío.</p>";
      }
    });

    //Evento para el botón que elimina todos los items del carrito
    const deleteItemsButton = document.getElementById("delItems");
    deleteItemsButton.addEventListener("click", () => {
      deleteItems();
    });

    //función que elimina todos los elementos del carrito al accionar el botón
    function deleteItems() {
      localStorage.removeItem("carrito");
      const carritoLista = document.getElementById("carritoLista");
      carritoLista.innerHTML = "<P> !EL CARRITO ESTÁ VACÍO ! </P>";
    }

  </script>
</body>

</html>